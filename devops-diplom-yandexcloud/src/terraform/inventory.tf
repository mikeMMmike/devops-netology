resource "local_file" "inventory" {
  content = <<-DOC
    # Ansible inventory containing variable values from Terraform.
    # Generated by Terraform.

[nginx]
mycompanyname.ru
[mysql]
${yandex_compute_instance.db01.network_interface.0.ip_address} mysql_server_id=1 mysql_replication_role=master
${yandex_compute_instance.db02.network_interface.0.ip_address} mysql_server_id=2 mysql_replication_role=slave
[wordpress]
${yandex_compute_instance.app.network_interface.0.ip_address}
[monitoring]
${yandex_compute_instance.monitoring.network_interface.0.ip_address}
[gitlab]
${yandex_compute_instance.gitlab.network_interface.0.ip_address}
[runner]
${yandex_compute_instance.runner.network_interface.0.ip_address}

[nodes:children]
    mysql
    wordpress
    runner
    gitlab
    monitoring
[nodes:vars]
ansible_ssh_common_args= "-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -J ubuntu@mycompanyname.ru"

    DOC
  filename = "../ansible/inventory"
/*
Вот это ломает терраформ:
[nginx]
${yandex_compute_instance.nginx.hostname}
*/
}