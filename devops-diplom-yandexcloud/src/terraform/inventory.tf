resource "local_file" "inventory" {
  content = <<-DOC
    # Ansible inventory containing variable values from Terraform.
    # Generated by Terraform.

[nginx]
mycompanyname.ru
[mysql]
db01.mycompanyname.ru mysql_server_id=1 mysql_replication_role=master
db02.mycompanyname.ru mysql_server_id=2 mysql_replication_role=slave
[wordpress]
app.mycompanyname.ru
[monitoring]
monitoring.mycompanyname.ru
[gitlab]
gitlab.mycompanyname.ru
[runner]
runner.mycompanyname.ru

[nodes:children]
    mysql
    wordpress
[nodes:vars]
ansible_ssh_common_args= "-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -J ubuntu@mycompanyname.ru"



    DOC
  filename = "../ansible/inventory"

/*  depends_on = [yandex_compute_instance.nginx]*/


  #[all:vars]
#ansible_ssh_common_args= "-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -J ubuntu@mycompanyname.ru"

/*
Вариант конфигурации для автоподтверждения публичного ключа. У меня не работало на mysql серверах
[nodes:children]
    mysql
    wordpress

[nginx:vars]
ansible_ssh_common_args='-o StrictHostKeyChecking=no'
ansible_ssh_user=ubuntu
ansible_ssh_private_key_file=/home/mike/.ssh/id_rsa.pub
[nodes:vars]
ansible_ssh_common_args='-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o ProxyCommand="ssh -W %h:%p -q ubuntu@mycompanyname.ru"'
ansible_ssh_user=ubuntu*/
}