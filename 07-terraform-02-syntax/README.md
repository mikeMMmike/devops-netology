# Домашнее задание к занятию "7.2. Облачные провайдеры и синтаксис Terraform."

Зачастую разбираться в новых инструментах гораздо интересней понимая то, как они работают изнутри. 
Поэтому в рамках первого *необязательного* задания предлагается завести свою учетную запись в AWS (Amazon Web Services) или Yandex.Cloud.
Идеально будет познакомиться с обоими облаками, потому что они отличаются. 


## Задача 1 (Вариант с Yandex.Cloud). Регистрация в ЯО и знакомство с основами (необязательно, но крайне желательно).

1. Подробная инструкция на русском языке содержится [здесь](https://cloud.yandex.ru/docs/solutions/infrastructure-management/terraform-quickstart).
2. Обратите внимание на период бесплатного использования после регистрации аккаунта. 
3. Используйте раздел "Подготовьте облако к работе" для регистрации аккаунта. Далее раздел "Настройте провайдер" для подготовки
базового терраформ конфига.
4. Воспользуйтесь [инструкцией](https://registry.terraform.io/providers/yandex-cloud/yandex/latest/docs) на сайте терраформа, что бы 
не указывать авторизационный токен в коде, а терраформ провайдер брал его из переменных окружений.

## Задача 2. Создание yandex_compute_instance через терраформ. 

1. В каталоге `terraform` вашего основного репозитория, который был создан в начале курсе, создайте файл `main.tf` и `versions.tf`.
2. Зарегистрируйте провайдер для [yandex.cloud](https://registry.terraform.io/providers/yandex-cloud/yandex/latest/docs). Подробную инструкцию можно найти 
   [здесь](https://cloud.yandex.ru/docs/solutions/infrastructure-management/terraform-quickstart).
3. Внимание! В гит репозиторий нельзя пушить ваши личные ключи доступа к аккаунту. Поэтому в предыдущем задании мы указывали
их в виде переменных окружения. 
4. В файле `main.tf` воспользуйтесь блоком `data "aws_ami` для поиска ami образа последнего Ubuntu.  
5. В файле `main.tf` создайте ресурс [yandex_compute_image](https://registry.terraform.io/providers/yandex-cloud/yandex/latest/docs/resources/compute_image).
6. Если вы выполнили первый пункт, то добейтесь того, чтобы команда `terraform plan` выполнялась без ошибок. 


В качестве результата задания предоставьте:
1. Ответ на вопрос: при помощи какого инструмента (из разобранных на прошлом занятии) можно создать свой образ ami?
2. Ссылку на репозиторий с исходной конфигурацией терраформа.  
 



`Задачу с AWS не выполнял. Само задание вынес в комментарии ниже. посмотреть можно в RAW или в редакторе`

[comment]: <> (## Задача 1 &#40;вариант с AWS&#41;. Регистрация в aws и знакомство с основами &#40;необязательно, но крайне желательно&#41;.)

[comment]: <> (Остальные задания можно будет выполнять и без этого аккаунта, но с ним можно будет увидеть полный цикл процессов. )

[comment]: <> (AWS предоставляет достаточно много бесплатных ресурсов в первый год после регистрации, подробно описано [здесь]&#40;https://aws.amazon.com/free/&#41;.)

[comment]: <> (1. Создайте аккаут aws.)

[comment]: <> (2. Установите aws-cli https://aws.amazon.com/cli/.)

[comment]: <> (3. Выполните первичную настройку aws-sli https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-quickstart.html.)

[comment]: <> (4. Создайте IAM политику для терраформа c правами)

[comment]: <> (    * AmazonEC2FullAccess)

[comment]: <> (    * AmazonS3FullAccess)

[comment]: <> (    * AmazonDynamoDBFullAccess)

[comment]: <> (    * AmazonRDSFullAccess)

[comment]: <> (    * CloudWatchFullAccess)

[comment]: <> (    * IAMFullAccess)

[comment]: <> (5. Добавьте переменные окружения )

[comment]: <> (    ```)

[comment]: <> (    export AWS_ACCESS_KEY_ID=&#40;your access key id&#41;)

[comment]: <> (    export AWS_SECRET_ACCESS_KEY=&#40;your secret access key&#41;)

[comment]: <> (    ```)

[comment]: <> (6. Создайте, остановите и удалите ec2 инстанс &#40;любой с пометкой `free tier`&#41; через веб интерфейс. )

[comment]: <> (В виде результата задания приложите вывод команды `aws configure list`.)

[comment]: <> (## Задача 2. Создание aws ec2 через терраформ. )

[comment]: <> (1. В каталоге `terraform` вашего основного репозитория, который был создан в начале курсе, создайте файл `main.tf` и `versions.tf`.)

[comment]: <> (2. Зарегистрируйте провайдер для [aws]&#40;https://registry.terraform.io/providers/hashicorp/aws/latest/docs&#41;. В файл `main.tf` добавьте)

[comment]: <> (   блок `provider`, а в `versions.tf` блок `terraform` с вложенным блоком `required_providers`. Укажите любой выбранный вами регион )

[comment]: <> (   внутри блока `provider`.   )

[comment]: <> (3. Внимание! В гит репозиторий нельзя пушить ваши личные ключи доступа к аккаунту. Поэтому в предыдущем задании мы указывали)

[comment]: <> (их в виде переменных окружения. )

[comment]: <> (4. В файле `main.tf` воспользуйтесь блоком `data "aws_ami` для поиска ami образа последнего Ubuntu.  )

[comment]: <> (5. В файле `main.tf` создайте рессурс )

[comment]: <> (   1. либо [ec2 instance]&#40;https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance&#41;.)

[comment]: <> (   Постарайтесь указать как можно больше параметров для его определения. Минимальный набор параметров указан в первом блоке )

[comment]: <> (   `Example Usage`, но желательно, указать большее количество параметров.)

[comment]: <> (6. Также в случае использования aws:)

[comment]: <> (   1. Добавьте data-блоки `aws_caller_identity` и `aws_region`.)

[comment]: <> (   2. В файл `outputs.tf` поместить блоки `output` с данными об используемых в данный момент: )

[comment]: <> (       * AWS account ID,)

[comment]: <> (       * AWS user ID,)

[comment]: <> (       * AWS регион, который используется в данный момент, )

[comment]: <> (       * Приватный IP ec2 инстансы,)

[comment]: <> (       * Идентификатор подсети в которой создан инстанс.  )

[comment]: <> (7. Если вы выполнили первый пункт, то добейтесь того, чтобы команда `terraform plan` выполнялась без ошибок. )


[comment]: <> (В качестве результата задания предоставьте:)

[comment]: <> (1. Ответ на вопрос: при помощи какого инструмента &#40;из разобранных на прошлом занятии&#41; можно создать свой образ ami?)

[comment]: <> (2. Ссылку на репозиторий с исходной конфигурацией терраформа.)

---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---